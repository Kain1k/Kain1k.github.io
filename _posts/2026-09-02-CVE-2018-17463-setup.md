---
title: "Environment Setup and V8 Build for CVE-2018-17463 on Windows"
date: 2026-02-09 00:00:00 +0800
categories: [Browser Exploitation, Chrome Exploitation]
tags: [Chrome Exploitation, Browser Exploitation, Set Up]
---

In this blog, I will guide you through building V8 on Windows. Building on Windows is a bit more complicated than on Linux (on Linux, you can use Docker to build more easily), so please consider this carefully, as it may affect your exploit code.

First, install the following components through Visual Studio 2019 by choosing **Modify VS 2019** in the Visual Studio Installer:
- **MSVC v140 – VS 2015 C++ build tools (v14.00)**

- **MSVC v141 – VS 2017 C++ x64/x86 build tools (v14.16)**

- **Windows 10 SDK (10.0.17134.0 or 10.0.19041.0)**

When CVE-2018-17463 was discovered, V8 was using VS 2017 and Windows 10 SDK **10.0.17134.0**. However, when rebuilding now, we can use VS 2019. You might not have SDK version **10.0.17134.0** and only have **10.0.19041.0**. This causes a small issue because this V8 version expects **10.0.17134.0**. Luckily, SDK **10.0.19041.0** is backward compatible.

There are many ways to fix this, like setting PATH every time in the shell, but here we will “fake” the SDK version:

- Go to `C:\Program Files (x86)\Windows Kits\10`. Find the **Lib** and **Include** folders. In both folders, copy the folder named **10.0.19041.0** and rename the copy to **10.0.17134.0**.

- Still in the same path, open the **bin** folder. You will see folders for both **10.0.19041.0** and **10.0.17134.0**. Delete the existing **10.0.17134.0** folder, then copy **10.0.19041.0** and rename it to **10.0.17134.0**.
The old **10.0.17134.0** folder is basically empty, which can cause the error “unable to find mt.exe” during build. This step fixes that.

- One more recommended step: install **Debugging Tools for Windows**.
Go to `Control Panel` → `Uninstall a program`, right-click Windows SDK, choose `Change`, and select and select it like in the image below.
![](DTW.png)

We also need to install Python 2, because at that time the build tools were written using Python 2 syntax. You probably don’t want to go through dozens of Python files just to rewrite them for Python 3.

Next, install [depot_tools](https://storage.googleapis.com/chrome-infra/depot_tools.zip) (you can download it directly or clone it through git). I put it in a separate folder for easier management, like this: `C:\BE\depot_tools`.
After that, follow these steps to add the required items to Environment Variables:
- Edit the System PATH variable and move `C:\BE\depot_tools` to the top.
- Add a User Variable named **vs2017_install** and set it to:
`C:\Program Files (x86)\Microsoft Visual Studio 14.0\`
- Add `C:\Program Files (x86)\Windows Kits\10\bin\10.0.17134.0\x64` to the User Path variable.
- Add a User Variable named **DEPOT_TOOLS_WIN_TOOLCHAIN** and set it to 0. This prevents depot_tools from downloading Google’s toolchain and forces it to use your local Visual Studio toolchain.
![](system_val.png)

Once everything is set up, go inside the folder and run the command: `gclient`. If you see output like this when checking with the `where python3` command, it means the installation was successful.
![](gclient.png)

Next, move to the folder where you want to work. In my case, it is: `C:\BE\CVE-2018-17463`. Then run the following commands:
```bash
mkdir v8 && cd v8
fetch v8
```

When that finishes, continue with the next command:
```bash
cd v8
git checkout <number version> (or git fetch) 
gclient sync
```
`git fetch` is used to update to the latest branches, while `git checkout` lets you switch to a specific branch or commit. Since we are rebuilding an old CVE, we will check out the commit with ID `568979f4d891bafec875fab20f608ff9392f4f29`, which contains this vulnerability. Remember that every time you switch branches or commits, you need to run `gclient sync` again.

You can use `git show` to verify that `git checkout` moved you to the correct version.

If `gclient sync` fails like in my example below, it’s because (as mentioned earlier) this older V8 build expects Python 2. Python 3 uses different syntax and is not backward compatible with those scripts.

![](py2.png)

The fix is pretty simple. You could install Python 2 and add it to your Environment Variables, but that might cause conflicts if your system also has Python 3 installed, like mine. So in this case, I prefer to temporarily set the PATH instead. This only works for the current shell session (it resets when you close it), but it avoids unnecessary conflicts.

Run the following command, then execute `gclient sync` again:
```bash
set PATH=C:\Python27;C:\Python27\Scripts;%PATH%
gclient sync
```
If it looks like the image below, it’s okay.
![](okeee.png)
We’re at the final step — building. But before we build, you should know that V8 and Chrome use **ninja** as the build system. Older versions don’t include ninja by default, so we need to install it manually [here](https://github.com/ninja-build/ninja/releases). Extract it to get `ninja.exe`, then move that file into your current V8 folder (mine is `C:\BE\CVE-2018-17463\v8\v8`).

After that, run the following command to continue the build:
```bash
gn gen out\x64.debug --args="is_debug=true target_cpu=\"x64\" v8_target_cpu=\"x64\" is_component_build=false v8_enable_backtrace=true v8_enable_slow_dchecks=true v8_optimized_debug=false symbol_level=2"
ninja -C out\x64.debug d8
```
The flags above are required to build the debug version. `is_component_build=true` splits the build into multiple DLLs so d8 links dynamically. If you set it to false, it links statically instead. I recommend keeping it set to `false` to avoid linker issues where both static/object files and DLLs get linked at the same time, which can cause duplicate symbol errors.

Grab a cup of tea and wait for the build to finish.
![](v8_done.png)

You can also use gm.py, which wraps **gn** and **ninja** together and automatically detects whether you want a debug or release build because the syntax is predefined. The flags I used in the **gn** command were taken from this script.

In my case, it failed — probably because this older version of gm.py was meant for Linux. I noticed it uses termios, which is only available on Linux/macOS. So I chose to build manually instead. Building with a newer version might work.

```bash
python tools\dev\gm.py x64.debug
```